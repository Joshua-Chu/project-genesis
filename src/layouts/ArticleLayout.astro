---
import AstroHeader from "@/components/article/ArticleHeader.astro";
import type { CollectionEntry } from "astro:content";
import BaseLayout from "./Base.astro";

interface Props {
  article: CollectionEntry<"article">;
}

const { article } = Astro.props;
const {
  data: { description, ogImage, publishDate, title, updatedDate },
  slug,
} = article;
const socialImage = `/og-image/${slug}.png`;
const articleDate = updatedDate?.toISOString() ?? publishDate.toISOString();
---

<BaseLayout meta={{ articleDate, description, title, ogImage: socialImage }}>
  <article id="article">
    <div>
      <AstroHeader article={article} />
    </div>
    <slot />
  </article>
</BaseLayout>

<style lang="scss" is:global>
  #article {
    img {
      width: 100%;
      max-height: 400px;
      object-fit: cover;
    }
  }
</style>
